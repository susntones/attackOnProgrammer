### 概述

top命令是linux下常用的性能分析工具。

#### 使用实例

1.top

第一行内容<br>
系统时间，当前登录系统的用户数量。<br>
load average ：分别是1分钟，5分钟，15分钟的系统平均负载<br>
load average : 数据是每5秒检查一次活跃的进程数，通过特定的算法生成。如果这个数值除以逻辑cpu的数量大于5，表明系统超负荷运转了。<br>

第二行内容<br>
Tasks 任务，进程的情况<br>

第三行的内容<br>
* us：用户空间占用的cpu百分比
* sy: 内核空间占用的cpu百分比
* ni: 改变过优先级的进程占用的cpu百分比
* id：空闲cpu百分比
* wa：IO等待占用的cpu的百分比
* hi: 硬中断（hardware IRQ）cpu百分比
* si：软终端（software IRQ) cpu百分比

第四行 内存的状态
* total 物理内存总量
* used 使用中的内存总量
* free 空闲的内存总量
* buffers 缓存的内存量

第五行 swap交换分区信息
* total 交换区总量
* used 使用交换区总量
* free 空闲的交换区总量
* cached 缓冲的交换区总量

*** 备注 *** <br>
第四行中使用内存的总量指的是系统内核控制的内存数，内存空闲总量是内核还未纳入其管理范围的数量。纳入内核管理并不一定都在使用，还包括使用过之后可以重新使用的内存，内核并不把这些可被重新使用的内存交到free，因此linux上的free内存会越来越少。<br>
可用内存的近似公式mfree + mbuffer + scached

第七行

* PID : 进程id
* USER : 进程所有者
* PR : 进程优先级
* NI : nice值，负值表示高优先级，正直表示低优先级
* VIRT : 进程使用的虚拟内存总量
* S 进程的状态 R=运行， s=睡眠， T=跟踪/停止， Z=僵尸进程
* COMMAND : 进程名称

2.top -c

显示完整命令

3.top -p pid

显示指定的进程信息

### top交互命令

* h 显示帮助画面，给出一些简短的命令总结说明
* k 终止一个进程。
* i 忽略闲置和僵死进程。这是一个开关式命令。
* q 退出程序
* r 重新安排一个进程的优先级别
* S 切换到累计模式
* s 改变两次刷新之间的延迟时间（单位为s），如果有小数，就换算成m s。输入0值则系统将不断刷新，默认值是5 s
* f或者F 从当前显示中添加或者删除项目
* o或者O 改变显示项目的顺序
* l 切换显示平均负载和启动时间信息
* m 切换显示内存信息
* t 切换显示进程和CPU状态信息
* c 切换显示命令名称和完整命令行
* M 根据驻留内存大小进行排序
* P 根据CPU使用百分比大小进行排序
* T 根据时间/累计时间进行排序
* W 将当前设置写入~/.toprc文件中

参考资料<br>
[每天一个linux命令-top](http://www.cnblogs.com/peida/archive/2012/12/24/2831353.html)
